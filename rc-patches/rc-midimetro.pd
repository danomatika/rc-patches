#N canvas 603 188 468 459 10;
#N canvas 4 46 812 291 save_state 0;
#X text 8 10 sssad state saving;
#X obj 316 123 sssad/sssad \$1/filename;
#X obj 316 149 route bang;
#X text 17 172 if state is saved without a file loaded \, then an empty
symbol will be loaded and sent as a bang;
#X text 15 209 the band then opens a load file dialog which is annoying
so ignore those bangs and let the symbols through;
#X obj 373 173 l2s;
#X obj 165 89 sssad/sssad \$1/ticksperbeat;
#X obj 25 64 sssad/sssad \$1/bpm;
#X obj 487 170 sssad/sssad \$1/eofstop;
#X obj 616 144 r \$0-eofstop;
#X obj 487 196 s \$0-eofstop;
#X obj 373 196 s \$0-filename;
#X obj 451 97 r \$0-filename;
#X obj 324 61 r \$0-ticksperbeat;
#X obj 165 121 s \$0-ticksperbeat;
#X obj 130 38 r \$0-bpm;
#X obj 25 96 s \$0-bpm;
#X obj 700 212 r \$0-midiin;
#X obj 577 237 sssad/sssad \$1/midiin;
#X obj 577 262 s \$0-midiin;
#X connect 1 0 2 0;
#X connect 2 1 5 0;
#X connect 5 0 11 0;
#X connect 6 0 14 0;
#X connect 7 0 16 0;
#X connect 8 0 10 0;
#X connect 9 0 8 1;
#X connect 12 0 1 1;
#X connect 13 0 6 1;
#X connect 15 0 7 1;
#X connect 17 0 18 1;
#X connect 18 0 19 0;
#X restore 274 434 pd save_state;
#X obj 139 388 outlet;
#X obj 16 387 outlet;
#X obj 324 389 s \$1/beat;
#X obj 272 389 outlet;
#X text 179 12 a metro with synchronized midifile;
#N canvas 453 119 498 154 defaults 0;
#X obj 128 14 loadbang;
#X msg 128 67 120;
#X msg 296 73 4;
#X msg 16 69 symbol empty;
#X obj 16 102 s \$0-file;
#X obj 128 103 s \$0-bpm;
#X obj 296 104 s \$0-ticksperbeat;
#X obj 194 103 s \$0-eofstop;
#X msg 416 72 1;
#X obj 416 105 s \$0-midiin;
#X msg 194 70 0;
#X connect 0 0 1 0;
#X connect 0 0 10 0;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X connect 0 0 8 0;
#X connect 1 0 5 0;
#X connect 2 0 6 0;
#X connect 3 0 4 0;
#X connect 8 0 9 0;
#X connect 10 0 7 0;
#X restore 144 434 pd defaults;
#X obj 14 126 inlet;
#X text 15 437 Dan Wilcox 2009;
#X obj 56 214 s \$0-filename;
#X obj 1 14 cnv 15 143 93 empty empty empty 20 12 0 14 -228856 -66577
0;
#X symbolatom 6 67 22 0 0 0 - #0-file -;
#X obj 98 49 nbx 3 14 1 256 0 0 \$0-ticksperbeat \$0-ticksperbeat tk/bt
-32 7 0 10 -261234 -1 -1 4 256;
#X obj 25 48 nbx 3 14 1 500 0 0 \$0-bpm \$0-bpm bpm -20 6 0 10 -261234
-1 -1 160 256;
#X obj 6 21 tgl 20 0 \$0-startstop \$0-startstop empty 17 7 0 10 -4034
-1 -1 1 1;
#X obj 42 24 bng 15 250 50 0 \$0-reset \$0-reset reset 17 7 0 10 -191407
-1 -1;
#X obj 7 89 tgl 15 0 \$0-eofstop \$0-eofstop eof_stop 17 7 0 10 -191407
-1 -1 0 1;
#X obj 97 24 bng 15 250 50 0 \$0-load empty load 18 7 0 10 -203904
-1 -1;
#X obj 83 88 tgl 15 0 \$0-midiin \$0-midiin midiin 17 7 0 10 -204786
-1 -1 1 1;
#N canvas 139 735 323 237 midiin 0;
#X obj 76 51 midiin;
#X obj 76 155 outlet;
#X obj 76 118 spigot;
#X obj 109 87 r \$0-midiin;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 3 0 2 1;
#X restore 16 312 pd midiin;
#X text 181 30 also contains a midiin object;
#X text 177 72 rc-ctlin \, and rc-pgmin;
#X text 177 58 useful with rc-notein \,;
#X obj 14 245 clip 0 1;
#X obj 14 214 int;
#X obj 14 271 s \$0-startstop;
#X obj 230 154 route bpm ticksperbeat eof midiin;
#X obj 230 126 inlet control messages;
#X obj 230 264 clip 0 300;
#X obj 230 292 s \$0-bpm;
#X obj 376 184 s \$0-midiin;
#X obj 142 187 s \$0-reset;
#X obj 278 239 s \$0-ticksperbeat;
#N canvas 163 22 538 700 metro 0;
#X obj 39 611 midifile;
#N canvas 126 213 450 300 bpm2miditick 0;
#X obj 43 30 inlet;
#X obj 43 202 outlet;
#X text 161 67 1 tick = 768 ms;
#X obj 43 75 expr 60000 / $f1;
#X obj 43 158 / 192;
#X connect 0 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X restore 66 74 pd bpm2miditick;
#X obj 39 104 metro;
#X msg 80 584 rewind;
#X msg 108 463 read \$1;
#X msg 132 696 0;
#X text 159 695 stop at end of file;
#X obj 132 750 spigot;
#X obj 320 557 r \$0-load;
#X obj 320 585 openpanel;
#N canvas 331 487 443 244 split_filename_for_symbolbox 0;
#X obj 17 25 inlet;
#X obj 92 188 s \$0-file;
#X obj 17 128 makesymbol /%s;
#X obj 17 88 prepend symbol;
#X text 113 89 make incoming filepath a symbol;
#X text 115 114 add a "/" so if loading a local path aka ./file.wav
;
#X obj 17 56 l2s _;
#X text 57 56 spaces to _;
#X obj 17 163 splitfilename;
#X text 121 129 splitfilename will dump the filename out the right
;
#X connect 0 0 6 0;
#X connect 2 0 8 0;
#X connect 3 0 2 0;
#X connect 6 0 3 0;
#X connect 8 1 1 0;
#X restore 322 784 pd split_filename_for_symbolbox;
#X obj 322 730 s2l;
#X obj 322 755 l2s _;
#X obj 132 665 t b b;
#X obj 162 557 loadbang;
#X msg 162 585 verbose 0;
#X obj 81 359 r \$0-filename;
#X obj 322 681 r \$0-filename;
#X obj 322 706 symbol;
#X obj 81 382 symbol;
#X obj 80 556 r \$0-reset;
#X obj 165 722 r \$0-eofstop;
#X obj 132 779 s \$0-startstop;
#X obj 320 612 s \$0-filename;
#X obj 66 46 r \$0-bpm;
#X obj 39 18 r \$0-startstop;
#X obj 53 726 inlet;
#X obj 190 403 f;
#X obj 227 403 + 1;
#X msg 190 43 0;
#X obj 190 16 r \$0-reset;
#X obj 246 340 int;
#X obj 246 367 change;
#X obj 267 124 / 4;
#X obj 102 243 f;
#X obj 143 243 + 1;
#X obj 75 131 r \$1/pos;
#X obj 267 70 t b f;
#X obj 267 46 r \$0-ticksperbeat;
#X obj 246 312 / 48;
#X text 278 313 192/4;
#X msg 267 97 192;
#X obj 267 148 int;
#X obj 39 779 outlet midi;
#X obj 190 453 outlet ticks;
#X obj 364 254 expr 60000 / $f1;
#X obj 364 335 / 4;
#X obj 378 303 t b f;
#X obj 364 228 r \$0-bpm;
#X obj 378 279 r \$0-ticksperbeat;
#X obj 409 411 s \$1/ticksize;
#X obj 409 388 f;
#X msg 409 362 bang;
#X obj 409 337 r \$1/beat;
#X obj 364 435 s \$1/beatlength;
#X text 273 171 192 midi ticks / beat;
#X obj 75 179 * 48;
#X obj 75 155 int;
#X obj 75 208 t f f;
#X obj 62 330 r \$0-reload;
#X obj 108 439 rc-filename;
#X msg 81 492 bang;
#X obj 81 516 s \$0-reset;
#X text 203 427 pos in beat ticks;
#X text 88 263 pos in midi ticks;
#X obj 81 412 t b a;
#X obj 84 637 route bang;
#X obj 190 367 t b f;
#X connect 0 0 43 0;
#X connect 0 2 66 0;
#X connect 1 0 2 1;
#X connect 2 0 34 0;
#X connect 2 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 7 0;
#X connect 7 0 22 0;
#X connect 8 0 9 0;
#X connect 9 0 23 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 13 0 5 0;
#X connect 13 1 3 0;
#X connect 14 0 15 0;
#X connect 15 0 0 0;
#X connect 16 0 19 0;
#X connect 17 0 18 0;
#X connect 18 0 11 0;
#X connect 19 0 65 0;
#X connect 20 0 3 0;
#X connect 21 0 7 1;
#X connect 24 0 1 0;
#X connect 25 0 2 0;
#X connect 26 0 43 0;
#X connect 27 0 28 0;
#X connect 27 0 44 0;
#X connect 28 0 27 1;
#X connect 29 0 34 1;
#X connect 29 0 67 0;
#X connect 30 0 29 0;
#X connect 31 0 32 0;
#X connect 32 0 27 0;
#X connect 33 0 42 0;
#X connect 34 0 35 0;
#X connect 34 0 39 0;
#X connect 35 0 34 1;
#X connect 36 0 57 0;
#X connect 37 0 41 0;
#X connect 37 1 33 1;
#X connect 38 0 37 0;
#X connect 39 0 31 0;
#X connect 41 0 33 0;
#X connect 42 0 39 1;
#X connect 42 0 56 1;
#X connect 45 0 46 0;
#X connect 46 0 54 0;
#X connect 46 0 51 1;
#X connect 47 0 46 0;
#X connect 47 1 46 1;
#X connect 48 0 45 0;
#X connect 49 0 47 0;
#X connect 51 0 50 0;
#X connect 52 0 51 0;
#X connect 53 0 52 0;
#X connect 56 0 58 0;
#X connect 57 0 56 0;
#X connect 58 0 0 0;
#X connect 58 1 34 0;
#X connect 59 0 19 0;
#X connect 60 0 4 0;
#X connect 61 0 62 0;
#X connect 65 0 61 0;
#X connect 65 1 60 0;
#X connect 66 0 13 0;
#X connect 67 0 27 0;
#X connect 67 1 27 1;
#X restore 16 338 pd metro and midifile;
#X obj 14 157 route float load reload reset;
#X obj 143 243 s \$0-reload;
#X msg 143 215 bang;
#N canvas 12 92 392 263 sends 0;
#X obj -46 65 / 4;
#X obj -46 88 int;
#X obj -46 112 change;
#X obj -46 12 r \$1/tick;
#X obj -46 141 outlet;
#X obj -31 38 r \$0-ticksperbeat;
#X obj -186 108 r \$0-bpm;
#X obj -186 138 s \$1/bpm;
#X obj -188 31 r \$0-ticksperbeat;
#X obj -188 57 s \$1/ticksperbeat;
#X obj -183 179 r \$1/startstop;
#X obj -183 203 s \$0-startstop;
#X obj -45 179 r \$1/reset;
#X obj -45 205 s \$0-reset;
#X obj 66 205 s \$1/resetout;
#X obj 66 180 r \$0-reset;
#X obj 47 121 s \$1/startstopout;
#X obj 47 97 r \$0-startstop;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 0 0;
#X connect 5 0 0 1;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 15 0 14 0;
#X connect 17 0 16 0;
#X restore 272 346 pd sends and recvs;
#X obj 68 388 s \$1/tick;
#X obj 192 388 s \$1/midi;
#X obj 327 213 s \$0-eofstop;
#X connect 7 0 34 0;
#X connect 19 0 33 0;
#X connect 23 0 25 0;
#X connect 24 0 23 0;
#X connect 26 0 28 0;
#X connect 26 1 32 0;
#X connect 26 2 40 0;
#X connect 26 3 30 0;
#X connect 27 0 26 0;
#X connect 28 0 29 0;
#X connect 33 0 1 0;
#X connect 33 0 39 0;
#X connect 33 1 2 0;
#X connect 33 1 38 0;
#X connect 34 0 24 0;
#X connect 34 1 9 0;
#X connect 34 2 36 0;
#X connect 34 3 31 0;
#X connect 36 0 35 0;
#X connect 37 0 3 0;
#X connect 37 0 4 0;
#X coords 0 -1 1 1 145 110 1 0 0;
