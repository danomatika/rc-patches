#N canvas 1030 624 468 459 10;
#N canvas 0 0 812 291 save_state 0;
#X text 8 10 sssad state saving;
#X obj 316 123 sssad/sssad \$1/filename;
#X obj 316 149 route bang;
#X text 17 172 if state is saved without a file loaded \, then an empty
symbol will be loaded and sent as a bang;
#X text 15 209 the band then opens a load file dialog which is annoying
so ignore those bangs and let the symbols through;
#X obj 373 173 l2s;
#X obj 165 89 sssad/sssad \$1/ticksperbeat;
#X obj 25 64 sssad/sssad \$1/bpm;
#X obj 487 170 sssad/sssad \$1/eofstop;
#X obj 616 144 r \$0-eofstop;
#X obj 487 196 s \$0-eofstop;
#X obj 373 196 s \$0-filename;
#X obj 451 97 r \$0-filename;
#X obj 324 61 r \$0-ticksperbeat;
#X obj 165 121 s \$0-ticksperbeat;
#X obj 130 38 r \$0-bpm;
#X obj 25 96 s \$0-bpm;
#X obj 700 212 r \$0-midiin;
#X obj 577 237 sssad/sssad \$1/midiin;
#X obj 577 262 s \$0-midiin;
#X connect 1 0 2 0;
#X connect 2 1 5 0;
#X connect 5 0 11 0;
#X connect 6 0 14 0;
#X connect 7 0 16 0;
#X connect 8 0 10 0;
#X connect 9 0 8 1;
#X connect 12 0 1 1;
#X connect 13 0 6 1;
#X connect 15 0 7 1;
#X connect 17 0 18 1;
#X connect 18 0 19 0;
#X restore 274 434 pd save_state;
#X obj 139 388 outlet;
#X obj 192 388 s \$1/tick;
#X obj 16 387 outlet;
#X obj 68 388 s \$1/midi;
#X obj 324 389 s \$1/beat;
#X obj 272 389 outlet;
#X text 179 12 a metro with synchronized midifile;
#N canvas 453 119 565 289 defaults 0;
#X obj 158 74 loadbang;
#X msg 158 127 120;
#X msg 326 133 4;
#X msg 224 130 1;
#X msg 46 129 symbol empty;
#X obj 46 162 s \$0-file;
#X obj 158 163 s \$0-bpm;
#X obj 326 164 s \$0-ticksperbeat;
#X obj 224 163 s \$0-eofstop;
#X msg 446 132 1;
#X obj 446 165 s \$0-midiin;
#X connect 0 0 1 0;
#X connect 0 0 3 0;
#X connect 0 0 2 0;
#X connect 0 0 4 0;
#X connect 0 0 9 0;
#X connect 1 0 6 0;
#X connect 2 0 7 0;
#X connect 3 0 8 0;
#X connect 4 0 5 0;
#X connect 9 0 10 0;
#X restore 144 434 pd defaults;
#X obj 14 126 inlet;
#X text 15 437 Dan Wilcox 2009;
#X obj 56 214 s \$0-filename;
#X obj 1 14 cnv 15 138 93 empty empty empty 20 12 0 14 -228856 -66577
0;
#X symbolatom 6 67 21 0 0 0 - #0-file -;
#X obj 98 49 nbx 3 14 1 256 0 0 \$0-ticksperbeat \$0-ticksperbeat tk/bt
-32 7 0 10 -261234 -1 -1 4 256;
#X obj 25 48 nbx 3 14 1 500 0 0 \$0-bpm \$0-bpm bpm -20 6 0 10 -261234
-1 -1 160 256;
#X obj 6 21 tgl 20 0 \$0-startstop \$0-startstop empty 17 7 0 10 -4034
-1 -1 0 1;
#X obj 36 23 bng 15 250 50 0 \$0-reset \$0-reset reset 17 7 0 10 -191407
-1 -1;
#X obj 7 89 tgl 15 0 \$0-eofstop \$0-eofstop eof 17 7 0 10 -191407
-1 -1 1 1;
#X obj 92 24 bng 15 250 50 0 \$0-load empty load 18 7 0 10 -203904
-1 -1;
#X obj 102 90 bng 12 250 50 0 empty \$0-midi midi 15 7 0 8 -191407
-1 -1;
#X obj 45 89 tgl 15 0 \$0-midiin \$0-midiin midiin 17 7 0 10 -204786
-1 -1 1 1;
#X obj 67 367 s \$0-midi;
#N canvas 139 735 323 237 midiin 0;
#X obj 76 51 midiin;
#X obj 76 155 outlet;
#X obj 76 118 spigot;
#X obj 109 87 r \$0-midiin;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 3 0 2 1;
#X restore 16 312 pd midiin;
#X text 181 30 also contains a midiin object;
#X text 177 72 rc-ctlin \, and rc-pgmin;
#X text 177 58 useful with rc-notein \,;
#X obj 14 245 clip 0 1;
#X obj 14 214 int;
#X obj 14 271 s \$0-startstop;
#X obj 230 154 route bpm ticksperbeat eof midiin;
#X obj 230 126 inlet control messages;
#X obj 230 264 clip 0 300;
#X obj 230 292 s \$0-bpm;
#X obj 327 213 s \$0-eof;
#X obj 376 184 s \$0-midiin;
#X obj 142 187 s \$0-reset;
#X obj 278 239 s \$0-ticksperbeat;
#N canvas 155 316 547 736 metro 0;
#X obj 39 556 midifile;
#N canvas 122 192 450 300 bpm2miditick 0;
#X obj 43 30 inlet;
#X obj 43 202 outlet;
#X text 161 67 1 tick = 768 ms;
#X obj 43 75 expr 60000 / $f1;
#X obj 43 158 / 192;
#X connect 0 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X restore 66 74 pd bpm2miditick;
#X obj 39 104 metro;
#X msg 80 523 rewind;
#X msg 67 468 read \$1;
#X msg 132 618 0;
#X text 159 617 stop at end of file;
#X obj 132 672 spigot;
#X obj 320 494 r \$0-load;
#X obj 320 522 openpanel;
#N canvas 327 556 443 244 split_filename_for_symbolbox 0;
#X obj 17 25 inlet;
#X obj 92 188 s \$0-file;
#X obj 17 128 makesymbol /%s;
#X obj 17 88 prepend symbol;
#X text 113 89 make incoming filepath a symbol;
#X text 115 114 add a "/" so if loading a local path aka ./file.wav
;
#X obj 17 56 l2s _;
#X text 57 56 spaces to _;
#X obj 17 163 splitfilename;
#X text 121 129 splitfilename will dump the filename out the right
;
#X connect 0 0 6 0;
#X connect 2 0 8 0;
#X connect 3 0 2 0;
#X connect 6 0 3 0;
#X connect 8 1 1 0;
#X restore 322 706 pd split_filename_for_symbolbox;
#X obj 322 652 s2l;
#X obj 322 677 l2s _;
#X obj 132 587 t b b;
#X obj 162 496 loadbang;
#X msg 162 523 verbose 0;
#X obj 67 345 r \$0-filename;
#X obj 322 603 r \$0-filename;
#X obj 322 628 symbol;
#X obj 67 368 symbol;
#X obj 80 494 r \$0-reset;
#X obj 165 644 r \$0-eofstop;
#X obj 132 701 s \$0-startstop;
#X obj 320 549 s \$0-filename;
#X obj 66 46 r \$0-bpm;
#X obj 39 18 r \$0-startstop;
#X obj 53 648 inlet;
#X obj 190 403 f;
#X obj 227 403 + 1;
#X msg 190 43 0;
#X obj 190 16 r \$0-reset;
#X obj 213 343 int;
#X obj 213 370 change;
#X obj 234 123 / 4;
#X obj 102 243 f;
#X obj 143 243 + 1;
#X floatatom 102 272 5 0 0 1 pos_in_midi_ticks - -;
#X obj 75 131 r \$1/pos;
#X obj 234 69 t b f;
#X obj 234 45 r \$0-ticksperbeat;
#X obj 213 315 / 48;
#X text 245 316 192/4;
#X msg 234 96 192;
#X obj 234 147 int;
#X obj 39 701 outlet midi;
#X obj 190 453 outlet ticks;
#X obj 364 254 expr 60000 / $f1;
#X obj 364 335 / 4;
#X obj 378 303 t b f;
#X obj 364 228 r \$0-bpm;
#X obj 378 279 r \$0-ticksperbeat;
#X obj 409 411 s \$1/ticksize;
#X obj 409 388 f;
#X msg 409 362 bang;
#X obj 409 337 r \$1/beat;
#X obj 364 435 s \$1/beatlength;
#X text 240 170 192 midi ticks / beat;
#X obj 75 179 * 48;
#X floatatom 190 429 5 0 0 1 pos_in_beat_ticks - -;
#X obj 75 155 int;
#X obj 75 208 t f f;
#X obj 48 316 r \$0-reload;
#X obj 67 444 rc-filename;
#X msg 90 395 bang;
#X obj 90 419 s \$0-reset;
#X connect 0 0 44 0;
#X connect 0 2 13 0;
#X connect 1 0 2 1;
#X connect 2 0 34 0;
#X connect 2 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 0 0;
#X connect 5 0 7 0;
#X connect 7 0 22 0;
#X connect 8 0 9 0;
#X connect 9 0 23 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 13 0 5 0;
#X connect 13 1 3 0;
#X connect 14 0 15 0;
#X connect 15 0 0 0;
#X connect 16 0 19 0;
#X connect 17 0 18 0;
#X connect 18 0 11 0;
#X connect 19 0 62 0;
#X connect 19 0 63 0;
#X connect 20 0 3 0;
#X connect 21 0 7 1;
#X connect 24 0 1 0;
#X connect 25 0 2 0;
#X connect 26 0 44 0;
#X connect 27 0 28 0;
#X connect 27 0 58 0;
#X connect 28 0 27 1;
#X connect 29 0 27 0;
#X connect 29 0 34 1;
#X connect 30 0 29 0;
#X connect 31 0 32 0;
#X connect 32 0 27 0;
#X connect 33 0 43 0;
#X connect 34 0 35 0;
#X connect 34 0 36 0;
#X connect 35 0 34 1;
#X connect 36 0 40 0;
#X connect 37 0 59 0;
#X connect 38 0 42 0;
#X connect 38 1 33 1;
#X connect 39 0 38 0;
#X connect 40 0 31 0;
#X connect 42 0 33 0;
#X connect 43 0 40 1;
#X connect 43 0 57 1;
#X connect 46 0 47 0;
#X connect 47 0 55 0;
#X connect 47 0 52 1;
#X connect 48 0 47 0;
#X connect 48 1 47 1;
#X connect 49 0 46 0;
#X connect 50 0 48 0;
#X connect 52 0 51 0;
#X connect 53 0 52 0;
#X connect 54 0 53 0;
#X connect 57 0 60 0;
#X connect 58 0 45 0;
#X connect 59 0 57 0;
#X connect 60 0 0 0;
#X connect 60 1 34 0;
#X connect 61 0 19 0;
#X connect 62 0 4 0;
#X connect 63 0 64 0;
#X restore 16 338 pd metro and midifile;
#X obj 14 157 route float load reload reset;
#X obj 143 243 s \$0-reload;
#X msg 143 215 bang;
#N canvas 0 0 392 263 sends 0;
#X obj -46 65 / 4;
#X obj -46 88 int;
#X obj -46 112 change;
#X obj -46 12 r \$1/tick;
#X obj -46 141 outlet;
#X obj -31 38 r \$0-ticksperbeat;
#X obj -186 108 r \$0-bpm;
#X obj -186 138 s \$1/bpm;
#X obj -188 31 r \$0-ticksperbeat;
#X obj -188 57 s \$1/ticksperbeat;
#X obj -183 179 r \$1/startstop;
#X obj -183 203 s \$0-startstop;
#X obj -45 179 r \$1/reset;
#X obj -45 205 s \$0-reset;
#X obj 66 205 s \$1/resetout;
#X obj 66 180 r \$0-reset;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 0 0;
#X connect 5 0 0 1;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 15 0 14 0;
#X restore 272 346 pd sends and recvs;
#X connect 9 0 39 0;
#X connect 23 0 38 0;
#X connect 27 0 29 0;
#X connect 28 0 27 0;
#X connect 30 0 32 0;
#X connect 30 1 37 0;
#X connect 30 2 34 0;
#X connect 30 3 35 0;
#X connect 31 0 30 0;
#X connect 32 0 33 0;
#X connect 38 0 3 0;
#X connect 38 0 22 0;
#X connect 38 0 4 0;
#X connect 38 1 1 0;
#X connect 38 1 2 0;
#X connect 39 0 28 0;
#X connect 39 1 11 0;
#X connect 39 2 41 0;
#X connect 39 3 36 0;
#X connect 41 0 40 0;
#X connect 42 0 5 0;
#X connect 42 0 6 0;
#X coords 0 -1 1 1 140 110 1 0 0;
