#N canvas 371 272 471 249 10;
#X text 254 164 left : clock bangs;
#X text 11 136 right : notes \, note lists \, & controls msgs;
#X text 173 11 sequence table \, records a sequence of midi notes;
#X text 187 59 Creation args: seq length \, ms timeout;
#X obj 3 17 cnv 15 158 105 empty empty empty 20 12 0 14 -228856 -66577
0;
#X obj 7 30 cnv 15 150 90 empty empty empty 20 12 0 14 -261234 -66577
0;
#N canvas 0 23 450 300 (subpatch) 0;
#X array \$0-notes 16 float 2;
#X coords 0 127 16 0 150 90 2 0 0;
#X restore 7 30 graph;
#N canvas 0 23 366 206 note 0;
#X obj 96 32 inlet;
#N canvas 621 66 415 650 combobulate 0;
#X obj 25 40 inlet;
#X obj 25 620 outlet;
#X obj 88 434 r \$0-size;
#X obj 70 529 r \$0-order;
#X obj 70 121 r \$0-flip;
#X text 17 13 mess with the incoming pitches;
#X text 145 176 flip the notes;
#X obj 25 102 spigot;
#X obj 58 74 r \$0-listen;
#X text 146 74 listen?;
#X text 103 464 build a list;
#X obj 127 563 r \$0-sort;
#X text 88 497 change LIFO to FIFO;
#X obj 87 311 timer;
#X msg 33 338 reset;
#X obj 87 278 sel 0 1;
#X obj 144 340 r \$0-timeout;
#X msg 33 398 bang;
#X msg 87 225 bang;
#X text 71 396 reset list if timeout reached between last note events
;
#X text 135 311 get duration between incoming notes;
#X text 138 225 check timeout;
#X obj 87 365 moses 1000;
#X obj 87 253 u_count 2;
#X obj 25 465 u_listlastx;
#X obj 25 498 u_listrev;
#X obj 70 588 u_listsort;
#X obj 70 176 m_noteflip;
#X obj 25 554 u_demux2;
#X obj 25 149 u_demux2;
#X obj 25 204 t f b;
#X connect 0 0 7 0;
#X connect 2 0 24 1;
#X connect 3 0 28 1;
#X connect 4 0 29 1;
#X connect 7 0 29 0;
#X connect 8 0 7 1;
#X connect 11 0 26 1;
#X connect 13 0 22 0;
#X connect 14 0 23 0;
#X connect 15 0 13 0;
#X connect 15 1 13 1;
#X connect 16 0 22 1;
#X connect 17 0 14 0;
#X connect 17 0 24 1;
#X connect 18 0 23 0;
#X connect 22 1 17 0;
#X connect 23 0 15 0;
#X connect 24 0 25 0;
#X connect 25 0 28 0;
#X connect 26 0 1 0;
#X connect 27 0 30 0;
#X connect 28 0 1 0;
#X connect 28 1 26 0;
#X connect 29 0 30 0;
#X connect 29 1 27 0;
#X connect 30 0 24 0;
#X connect 30 1 18 0;
#X restore 96 109 pd combobulate;
#N canvas 179 127 944 312 input 0;
#X obj 12 226 clip 0 127;
#X obj 98 148 s \$0-reset;
#X obj 587 199 s \$0-listen;
#X msg 548 138 1;
#X msg 188 120 0;
#X msg 223 120 -1;
#X obj 285 107 loadbang;
#X obj 223 201 s \$0-order;
#X obj 188 81 route asc dsc norm;
#X obj 377 180 s \$0-rev;
#X obj 459 181 s \$0-flip;
#X obj 507 108 loadbang;
#X obj 12 25 inlet;
#X obj 12 270 outlet;
#X obj 188 225 s \$0-sort;
#X text 117 24 HANDLE THE INPUTS;
#X text 79 226 clip bad floats;
#X obj 669 233 s \$0-timeout;
#X obj 669 125 loadbang;
#X obj 669 148 f \$2;
#X obj 669 171 sel 0;
#X msg 669 200 1000;
#X obj 742 155 \$0;
#X msg 742 182 \; \$1-notes const 0;
#X msg 742 127 bang;
#X msg 377 133 0;
#X msg 418 133 1;
#X msg 507 137 0;
#X msg 258 161 0;
#X msg 223 161 1;
#X obj 812 156 outlet;
#X obj 377 82 route fwd back invert;
#X obj 587 82 route listen timeout clear dump;
#X obj 812 128 array get \$0-notes;
#X msg 812 105 bang;
#X obj 12 80 route float list reset;
#X obj 55 179 array set \$0-notes;
#X connect 0 0 13 0;
#X connect 3 0 2 0;
#X connect 4 0 29 0;
#X connect 4 0 14 0;
#X connect 5 0 29 0;
#X connect 5 0 14 0;
#X connect 6 0 28 0;
#X connect 6 0 25 0;
#X connect 8 0 4 0;
#X connect 8 1 5 0;
#X connect 8 2 28 0;
#X connect 8 3 31 0;
#X connect 11 0 27 0;
#X connect 11 0 3 0;
#X connect 12 0 35 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 20 1 17 0;
#X connect 21 0 17 0;
#X connect 22 0 23 0;
#X connect 24 0 22 0;
#X connect 25 0 9 0;
#X connect 26 0 9 0;
#X connect 27 0 10 0;
#X connect 28 0 7 0;
#X connect 29 0 7 0;
#X connect 31 0 25 0;
#X connect 31 1 26 0;
#X connect 31 2 10 0;
#X connect 31 3 32 0;
#X connect 32 0 2 0;
#X connect 32 1 17 0;
#X connect 32 2 24 0;
#X connect 32 3 34 0;
#X connect 33 0 30 0;
#X connect 34 0 33 0;
#X connect 35 0 0 0;
#X connect 35 1 36 0;
#X connect 35 2 1 0;
#X connect 35 3 8 0;
#X restore 96 61 pd input;
#X text 167 61 handle input;
#X text 206 109 screw with notes;
#X text 24 86 MAIN;
#X text 233 143 write to table;
#X obj 141 85 outlet;
#X obj 96 141 array set \$0-notes;
#X connect 0 0 2 0;
#X connect 1 0 8 0;
#X connect 2 0 1 0;
#X connect 2 1 7 0;
#X restore 207 190 pd note input;
#X obj 16 164 inlet;
#N canvas 0 23 388 466 playback 0;
#X obj 167 401 outlet;
#X obj 163 67 r \$0-reset;
#X obj 59 39 inlet;
#X obj 239 120 r \$0-size;
#X obj 185 232 abs;
#X obj 239 180 - 1;
#X obj 185 205 -;
#X obj 186 263 r \$0-rev;
#X text 39 165 PLAYBACK;
#X msg 163 92 reset;
#X obj 128 342 tabread \$0-notes;
#X msg 245 289 0;
#X obj 245 263 loadbang;
#X obj 128 151 u_count 16;
#X obj 128 312 u_mux2;
#X obj 128 370 moses 1;
#X text 181 369 filter out 0 notes;
#X obj 185 179 outlet;
#X obj 59 66 route length;
#N canvas 0 23 296 297 arg1 0;
#X obj 45 47 loadbang;
#X obj 45 74 f \$1;
#X obj 72 186 pack f f;
#X obj 117 160 f \$0;
#X obj 125 133 s \$0-size;
#X text 95 97 sequence size;
#X text 143 201 resize table;
#X text 40 25 INIT VALUES;
#X obj 45 98 sel 0;
#X obj 72 133 t f b;
#X msg 72 218 \; \$2-notes resize \$1 \;;
#X obj 122 48 inlet;
#X obj 122 72 moses 1;
#X connect 0 0 1 0;
#X connect 1 0 8 0;
#X connect 2 0 10 0;
#X connect 3 0 2 1;
#X connect 8 1 4 0;
#X connect 8 1 9 0;
#X connect 9 0 2 0;
#X connect 9 1 3 0;
#X connect 11 0 12 0;
#X connect 12 1 8 0;
#X restore 59 97 pd arg1 len;
#X connect 1 0 9 0;
#X connect 2 0 18 0;
#X connect 3 0 5 0;
#X connect 3 0 13 1;
#X connect 4 0 14 1;
#X connect 5 0 6 1;
#X connect 6 0 4 0;
#X connect 7 0 14 2;
#X connect 9 0 13 0;
#X connect 10 0 15 0;
#X connect 11 0 14 2;
#X connect 12 0 11 0;
#X connect 13 0 6 0;
#X connect 13 0 14 0;
#X connect 13 1 17 0;
#X connect 14 0 10 0;
#X connect 15 1 0 0;
#X connect 18 0 19 0;
#X connect 18 1 13 0;
#X restore 16 190 pd playback;
#X obj 207 162 inlet;
#X obj 16 220 outlet note;
#X obj 207 220 outlet dump;
#X text 326 221 Dan Wilcox 2005 \, 2016;
#X obj 115 220 outlet end;
#X connect 7 0 12 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 9 1 14 0;
#X connect 10 0 7 0;
#X coords 0 -1 1 1 160 123 1 2 2;
